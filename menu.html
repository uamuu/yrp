<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      max-width: 400px;
      margin: 20px auto;
      padding: 15px;
      background: #f9f9f9;
      color: #222;
    }
    h2 {
      text-align: center;
      margin-bottom: 10px;
    }
    label {
      display: block;
      margin-bottom: 6px;
      font-weight: 600;
    }
    input[type="text"], input[type="number"], select {
      width: 100%;
      padding: 7px 10px;
      margin-bottom: 15px;
      border: 1px solid #ccc;
      border-radius: 5px;
      box-sizing: border-box;
      font-size: 1em;
    }
    button {
      width: 100%;
      padding: 10px;
      background-color: #0077cc;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1.1em;
      font-weight: 600;
      transition: background-color 0.3s ease;
    }
    button:hover {
      background-color: #005fa3;
    }
    .hidden {
      display: none;
    }
    .status {
      margin-top: 12px;
      text-align: center;
      font-weight: 600;
    }
    ul {
      padding-left: 20px;
    }
    .order-list {
      background: white;
      padding: 10px;
      border-radius: 8px;
      margin-bottom: 15px;
      box-shadow: 0 0 8px #ddd;
    }
    .nav-buttons {
      display: flex;
      justify-content: space-between;
      margin-bottom: 20px;
    }
    .nav-buttons button {
      width: 32%;
      background-color: #555;
    }
    .nav-buttons button.active {
      background-color: #0077cc;
    }
  </style>
</head>
<body>

  <h2>üçΩ ‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏£‡πâ‡∏≤‡∏ô YRP</h2>

  <label for="tableInput">‡πÇ‡∏ï‡πä‡∏∞‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà</label>
  <input type="text" id="tableInput" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç‡πÇ‡∏ï‡πä‡∏∞" />

  <div class="nav-buttons">
    <button id="btnMainMenu" class="active">‡πÄ‡∏°‡∏ô‡∏π‡∏à‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏Å</button>
    <button id="btnSnackMenu">‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏≤‡∏ô‡πÄ‡∏•‡πà‡∏ô</button>
    <button id="btnSummary">‡∏™‡∏£‡∏∏‡∏õ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</button>
  </div>

  <section id="mainMenu">
    <label for="mainMenuSelect">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å</label>
    <select id="mainMenuSelect">
      <option value="‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î" data-price="40">‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î - 40 ‡∏ö‡∏≤‡∏ó</option>
      <option value="‡∏ú‡∏±‡∏î‡πÑ‡∏ó‡∏¢" data-price="50">‡∏ú‡∏±‡∏î‡πÑ‡∏ó‡∏¢ - 50 ‡∏ö‡∏≤‡∏ó</option>
      <option value="‡∏ï‡πâ‡∏°‡∏¢‡∏≥‡∏Å‡∏∏‡πâ‡∏á" data-price="80">‡∏ï‡πâ‡∏°‡∏¢‡∏≥‡∏Å‡∏∏‡πâ‡∏á - 80 ‡∏ö‡∏≤‡∏ó</option>
    </select>

    <label for="mainMenuQty">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</label>
    <input type="number" id="mainMenuQty" value="1" min="1" />

    <button id="addMainMenu">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π‡∏à‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏Å</button>
  </section>

  <section id="snackMenu" class="hidden">
    <label for="snackMenuSelect">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏≤‡∏ô‡πÄ‡∏•‡πà‡∏ô</label>
    <select id="snackMenuSelect">
      <option value="‡πÄ‡∏ü‡∏£‡∏ô‡∏ä‡πå‡∏ü‡∏£‡∏≤‡∏¢‡∏™‡πå" data-price="40">‡πÄ‡∏ü‡∏£‡∏ô‡∏ä‡πå‡∏ü‡∏£‡∏≤‡∏¢‡∏™‡πå - 40 ‡∏ö‡∏≤‡∏ó</option>
      <option value="‡∏õ‡∏µ‡∏Å‡πÑ‡∏Å‡πà‡∏ó‡∏≠‡∏î" data-price="60">‡∏õ‡∏µ‡∏Å‡πÑ‡∏Å‡πà‡∏ó‡∏≠‡∏î - 60 ‡∏ö‡∏≤‡∏ó</option>
    </select>

    <label for="snackMenuQty">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</label>
    <input type="number" id="snackMenuQty" value="1" min="1" />

    <button id="addSnackMenu">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏≤‡∏ô‡πÄ‡∏•‡πà‡∏ô</button>
  </section>

  <section id="summary" class="hidden">
    <h3>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h3>
    <div class="order-list" id="orderList"></div>
    <div style="font-weight: 700; margin-top: 10px;">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏°: <span id="totalPrice">0</span> ‡∏ö‡∏≤‡∏ó</div>
    <button id="sendOrderBtn" style="margin-top: 20px;">üì§ ‡∏™‡πà‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</button>
    <p class="status" id="orderStatus"></p>
  </section>

  <script>
    const scriptURL = 'https://script.google.com/macros/s/AKfycbzUaUSaxy9ElSqFNxeKdrUUbx3J6fb0f6F6bH4cTg59n3jkRYHAUAkrsCqAf-ZH8V9Z/exec'; // ‡πÉ‡∏™‡πà URL Web App ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å Apps Script
    let orders = [];

    function showSection(section) {
      document.getElementById('mainMenu').classList.add('hidden');
      document.getElementById('snackMenu').classList.add('hidden');
      document.getElementById('summary').classList.add('hidden');

      document.querySelectorAll('.nav-buttons button').forEach(btn => btn.classList.remove('active'));

      if (section === 'main') {
        document.getElementById('mainMenu').classList.remove('hidden');
        document.getElementById('btnMainMenu').classList.add('active');
      } else if (section === 'snack') {
        document.getElementById('snackMenu').classList.remove('hidden');
        document.getElementById('btnSnackMenu').classList.add('active');
      } else {
        document.getElementById('summary').classList.remove('hidden');
        document.getElementById('btnSummary').classList.add('active');
        renderOrderList();
      }
    }

    document.getElementById('btnMainMenu').onclick = () => showSection('main');
    document.getElementById('btnSnackMenu').onclick = () => showSection('snack');
    document.getElementById('btnSummary').onclick = () => showSection('summary');

    document.getElementById('addMainMenu').onclick = () => {
      const select = document.getElementById('mainMenuSelect');
      const qty = Number(document.getElementById('mainMenuQty').value);
      orders.push({ name: select.value, qty, price: Number(select.selectedOptions[0].dataset.price) });
      alert(`‡πÄ‡∏û‡∏¥‡πà‡∏° ${select.value} x${qty}`);
    };

    document.getElementById('addSnackMenu').onclick = () => {
      const select = document.getElementById('snackMenuSelect');
      const qty = Number(document.getElementById('snackMenuQty').value);
      orders.push({ name: select.value, qty, price: Number(select.selectedOptions[0].dataset.price) });
      alert(`‡πÄ‡∏û‡∏¥‡πà‡∏° ${select.value} x${qty}`);
    };

    function renderOrderList() {
      const list = document.getElementById('orderList');
      list.innerHTML = '';
      let total = 0;
      orders.forEach((o, i) => {
        const itemTotal = o.price * o.qty;
        total += itemTotal;
        list.innerHTML += `<div>${o.name} x${o.qty} = ${itemTotal} ‡∏ö‡∏≤‡∏ó <button onclick="removeOrder(${i})">‚ùå</button></div>`;
      });
      document.getElementById('totalPrice').innerText = total;
    }

    function removeOrder(index) {
      orders.splice(index, 1);
      renderOrderList();
    }

    document.getElementById('sendOrderBtn').onclick = () => {
      const tableNo = document.getElementById('tableInput').value.trim();
      if (!tableNo) return alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÇ‡∏ï‡πä‡∏∞‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà');
      fetch(scriptURL, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ table: tableNo, orders })
      }).then(res => {
        if (res.ok) {
          document.getElementById('orderStatus').innerText = '‚úÖ ‡∏™‡πà‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!';
          orders = [];
          renderOrderList();
        } else {
          document.getElementById('orderStatus').innerText = '‚ùå ‡∏™‡πà‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!';
        }
      }).catch(err => {
        console.error(err);
        document.getElementById('orderStatus').innerText = '‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î!';
      });
    };

    showSection('main');
  </script>
</body>
</html>
