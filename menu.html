<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£</title>
  <style>
    /* ‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏°‡∏¥‡∏ô‡∏¥‡∏°‡∏≠‡∏• */
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      max-width: 400px;
      margin: 20px auto;
      padding: 15px;
      background: #f9f9f9;
      color: #222;
    }
    h2 {
      text-align: center;
      margin-bottom: 10px;
    }
    label {
      display: block;
      margin-bottom: 6px;
      font-weight: 600;
    }
    input[type="text"], input[type="number"], select {
      width: 100%;
      padding: 7px 10px;
      margin-bottom: 15px;
      border: 1px solid #ccc;
      border-radius: 5px;
      box-sizing: border-box;
      font-size: 1em;
    }
    button {
      width: 100%;
      padding: 10px;
      background-color: #0077cc;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 1.1em;
      font-weight: 600;
      transition: background-color 0.3s ease;
    }
    button:hover {
      background-color: #005fa3;
    }
    .hidden {
      display: none;
    }
    .status {
      margin-top: 12px;
      text-align: center;
      font-weight: 600;
    }
    ul {
      padding-left: 20px;
    }
    .order-list {
      background: white;
      padding: 10px;
      border-radius: 8px;
      margin-bottom: 15px;
      box-shadow: 0 0 8px #ddd;
    }
    .nav-buttons {
      display: flex;
      justify-content: space-between;
      margin-bottom: 20px;
    }
    .nav-buttons button {
      width: 48%;
      background-color: #555;
    }
    .nav-buttons button.active {
      background-color: #0077cc;
    }
  </style>
</head>
<body>

  <h2>üçΩ ‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h2>

  <!-- ‡∏Å‡∏£‡∏≠‡∏Å‡πÇ‡∏ï‡πä‡∏∞ -->
  <label for="tableInput">‡πÇ‡∏ï‡πä‡∏∞‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà</label>
  <input type="text" id="tableInput" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏•‡∏Ç‡πÇ‡∏ï‡πä‡∏∞" />

  <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏´‡∏ô‡πâ‡∏≤ -->
  <div class="nav-buttons">
    <button id="btnMainMenu" class="active">‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å</button>
    <button id="btnSnackMenu">‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏≤‡∏ô‡πÄ‡∏•‡πà‡∏ô</button>
    <button id="btnSummary">‡∏™‡∏£‡∏∏‡∏õ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</button>
  </div>

  <!-- ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å -->
  <section id="mainMenu">
    <label for="mainMenuSelect">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å</label>
    <select id="mainMenuSelect">
      <option value="‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î" data-price="40">‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î - 40 ‡∏ö‡∏≤‡∏ó</option>
      <option value="‡∏ú‡∏±‡∏î‡πÑ‡∏ó‡∏¢" data-price="50">‡∏ú‡∏±‡∏î‡πÑ‡∏ó‡∏¢ - 50 ‡∏ö‡∏≤‡∏ó</option>
      <option value="‡∏ï‡πâ‡∏°‡∏¢‡∏≥‡∏Å‡∏∏‡πâ‡∏á" data-price="80">‡∏ï‡πâ‡∏°‡∏¢‡∏≥‡∏Å‡∏∏‡πâ‡∏á - 80 ‡∏ö‡∏≤‡∏ó</option>
      <option value="‡∏™‡πâ‡∏°‡∏ï‡∏≥" data-price="45">‡∏™‡πâ‡∏°‡∏ï‡∏≥ - 45 ‡∏ö‡∏≤‡∏ó</option>
    </select>

    <label for="mainMenuQty">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</label>
    <input type="number" id="mainMenuQty" value="1" min="1" />

    <button id="addMainMenu">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å</button>
  </section>

  <!-- ‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏≤‡∏ô‡πÄ‡∏•‡πà‡∏ô -->
  <section id="snackMenu" class="hidden">
    <label for="snackMenuSelect">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏≤‡∏ô‡πÄ‡∏•‡πà‡∏ô</label>
    <select id="snackMenuSelect">
      <option value="‡∏õ‡∏µ‡∏Å‡πÑ‡∏Å‡πà‡∏ó‡∏≠‡∏î" data-price="60">‡∏õ‡∏µ‡∏Å‡πÑ‡∏Å‡πà‡∏ó‡∏≠‡∏î - 60 ‡∏ö‡∏≤‡∏ó</option>
      <option value="‡πÄ‡∏ü‡∏£‡∏ô‡∏ä‡πå‡∏ü‡∏£‡∏≤‡∏¢‡∏™‡πå" data-price="40">‡πÄ‡∏ü‡∏£‡∏ô‡∏ä‡πå‡∏ü‡∏£‡∏≤‡∏¢‡∏™‡πå - 40 ‡∏ö‡∏≤‡∏ó</option>
      <option value="‡πÑ‡∏Å‡πà‡∏¢‡πà‡∏≤‡∏á" data-price="75">‡πÑ‡∏Å‡πà‡∏¢‡πà‡∏≤‡∏á - 75 ‡∏ö‡∏≤‡∏ó</option>
      <option value="‡πÅ‡∏ã‡∏ô‡∏î‡πå‡∏ß‡∏¥‡∏ä" data-price="55">‡πÅ‡∏ã‡∏ô‡∏î‡πå‡∏ß‡∏¥‡∏ä - 55 ‡∏ö‡∏≤‡∏ó</option>
    </select>

    <label for="snackMenuQty">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</label>
    <input type="number" id="snackMenuQty" value="1" min="1" />

    <button id="addSnackMenu">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏≤‡∏ô‡πÄ‡∏•‡πà‡∏ô</button>
  </section>

  <!-- ‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ -->
  <section id="summary" class="hidden">
    <h3>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h3>
    <div class="order-list" id="orderList"></div>
    <div style="font-weight: 700; margin-top: 10px;">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏£‡∏ß‡∏°: <span id="totalPrice">0</span> ‡∏ö‡∏≤‡∏ó</div>
    <button id="sendOrderBtn" style="margin-top: 20px;">üì§ ‡∏™‡πà‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</button>
    <p class="status" id="orderStatus"></p>
  </section>

  <script>
    // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏Å‡πá‡∏ö‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå
    let orders = [];

    // ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏´‡∏ô‡πâ‡∏≤
    const btnMainMenu = document.getElementById('btnMainMenu');
    const btnSnackMenu = document.getElementById('btnSnackMenu');
    const btnSummary = document.getElementById('btnSummary');

    // ‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤
    const mainMenuSection = document.getElementById('mainMenu');
    const snackMenuSection = document.getElementById('snackMenu');
    const summarySection = document.getElementById('summary');

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏´‡∏ô‡πâ‡∏≤
    function showSection(section) {
      mainMenuSection.classList.add('hidden');
      snackMenuSection.classList.add('hidden');
      summarySection.classList.add('hidden');

      btnMainMenu.classList.remove('active');
      btnSnackMenu.classList.remove('active');
      btnSummary.classList.remove('active');

      if (section === 'main') {
        mainMenuSection.classList.remove('hidden');
        btnMainMenu.classList.add('active');
      } else if (section === 'snack') {
        snackMenuSection.classList.remove('hidden');
        btnSnackMenu.classList.add('active');
      } else if (section === 'summary') {
        summarySection.classList.remove('hidden');
        btnSummary.classList.add('active');
        renderOrderList();
      }
    }

    btnMainMenu.onclick = () => showSection('main');
    btnSnackMenu.onclick = () => showSection('snack');
    btnSummary.onclick = () => showSection('summary');

    // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å
    document.getElementById('addMainMenu').onclick = () => {
      const menuSelect = document.getElementById('mainMenuSelect');
      const qtyInput = document.getElementById('mainMenuQty');
      const name = menuSelect.value;
      const price = Number(menuSelect.selectedOptions[0].dataset.price);
      const qty = Number(qtyInput.value);

      if (qty < 1) {
        alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1');
        return;
      }

      orders.push({ name, price, qty });
      alert(`‡πÄ‡∏û‡∏¥‡πà‡∏° ${name} x${qty} ‡πÅ‡∏•‡πâ‡∏ß`);
      qtyInput.value = 1;
    };

    // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ó‡∏≤‡∏ô‡πÄ‡∏•‡πà‡∏ô
    document.getElementById('addSnackMenu').onclick = () => {
      const menuSelect = document.getElementById('snackMenuSelect');
      const qtyInput = document.getElementById('snackMenuQty');
      const name = menuSelect.value;
      const price = Number(menuSelect.selectedOptions[0].dataset.price);
      const qty = Number(qtyInput.value);

      if (qty < 1) {
        alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1');
        return;
      }

      orders.push({ name, price, qty });
      alert(`‡πÄ‡∏û‡∏¥‡πà‡∏° ${name} x${qty} ‡πÅ‡∏•‡πâ‡∏ß`);
      qtyInput.value = 1;
    };

    // ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå
    function renderOrderList() {
      const listDiv = document.getElementById('orderList');
      listDiv.innerHTML = '';

      if (orders.length === 0) {
        listDiv.innerHTML = '<p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£</p>';
        document.getElementById('totalPrice').innerText = '0';
        return;
      }

      let total = 0;
      const ul = document.createElement('ul');

      orders.forEach((item, index) => {
        const li = document.createElement('li');
        const itemTotal = item.price * item.qty;
        total += itemTotal;
        li.textContent = `${item.name} x${item.qty} = ${itemTotal} ‡∏ö‡∏≤‡∏ó `;

        // ‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
        const delBtn = document.createElement('button');
        delBtn.textContent = '‚ùå';
        delBtn.style.marginLeft = '8px';
        delBtn.style.cursor = 'pointer';
        delBtn.onclick = () => {
          orders.splice(index, 1);
          renderOrderList();
        };

        li.appendChild(delBtn);
        ul.appendChild(li);
      });

      listDiv.appendChild(ul);
      document.getElementById('totalPrice').innerText = total;
    }

    // ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ Google Apps Script
    const scriptURL = 'https://script.google.com/macros/s/AKfycbzUaUSaxy9ElSqFNxeKdrUUbx3J6fb0f6F6bH4cTg59n3jkRYHAUAkrsCqAf-ZH8V9Z/exec'; // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ï‡∏≤‡∏°‡∏à‡∏£‡∏¥‡∏á

    document.getElementById('sendOrderBtn').onclick = () => {
      const tableNo = document.getElementById('tableInput').value.trim();

      if (!tableNo) {
        alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÇ‡∏ï‡πä‡∏∞‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡∏Å‡πà‡∏≠‡∏ô‡∏™‡πà‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå');
        return;
      }

      if (orders.length === 0) {
        alert('‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÉ‡∏ô‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå');
        return;
      }

      const payload = {
        table: tableNo,
        orders: orders
      };

      fetch(scriptURL, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
      })
      .then(res => {
        if (res.ok) {
          document.getElementById('orderStatus').innerText = '‚úÖ ‡∏™‡πà‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!';
          orders = [];
          renderOrderList();
          document.getElementById('tableInput').value = '';
          showSection('main');
        } else {
          document.getElementById('orderStatus').innerText = '‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå';
        }
      })
      .catch(err => {
        document.getElementById('orderStatus').innerText = '‚ùå ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡πà‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÑ‡∏î‡πâ';
        console.error(err);
      });
    };

    // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å
    showSection('main');
  </script>
</body>
</html>
